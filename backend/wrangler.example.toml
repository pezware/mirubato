# Wrangler Configuration Template
# Copy this to wrangler.toml and fill in your values
# NEVER commit wrangler.toml with actual secrets

name = "mirubato-api"
main = "src/index.ts"
compatibility_date = "2024-01-15"

# Account ID - get from Cloudflare dashboard
account_id = "YOUR_CLOUDFLARE_ACCOUNT_ID"

# Development environment
[env.development]
name = "mirubato-api-dev"
vars = { ENVIRONMENT = "development" }

# Staging environment
[env.staging]
name = "mirubato-api-staging"
vars = { ENVIRONMENT = "staging" }
route = "api-staging.mirubato.com/*"

# Production environment
[env.production]
name = "mirubato-api"
vars = { ENVIRONMENT = "production" }
route = "api.mirubato.com/*"

# D1 Database bindings
[[d1_databases]]
binding = "DATABASE"
database_name = "mirubato-db"
database_id = "YOUR_DATABASE_ID"

# KV namespace bindings (if needed)
# [[kv_namespaces]]
# binding = "CACHE"
# id = "YOUR_KV_NAMESPACE_ID"

# R2 bucket bindings (for future local audio samples)
# Currently using Tone.js CDN: https://tonejs.github.io/audio/salamander/
# [[r2_buckets]]
# binding = "AUDIO_SAMPLES"
# bucket_name = "mirubato-audio-samples"

# Secrets are set via wrangler CLI:
# wrangler secret put JWT_SECRET
# wrangler secret put RESEND_API_KEY
# wrangler secret put CLOUDFLARE_API_TOKEN