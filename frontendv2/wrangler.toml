name = "mirubato-frontendv2"
main = "src/index.js"
compatibility_date = "2025-01-01"

# Production environment (default)
workers_dev = false

[assets]
directory = "./dist"
binding = "ASSETS"

[vars]
API_URL = "https://api.mirubato.com"

[[routes]]
pattern = "mirubato.com"
custom_domain = true

[[routes]]
pattern = "www.mirubato.com"
custom_domain = true

# Explicit production environment (for consistency)
[env.production]
name = "mirubato-frontendv2"
workers_dev = false

[env.production.vars]
API_URL = "https://api.mirubato.com"

[[env.production.routes]]
pattern = "mirubato.com"
custom_domain = true

[[env.production.routes]]
pattern = "www.mirubato.com"
custom_domain = true

[env.production.assets]
directory = "./dist"
binding = "ASSETS"

# Staging environment
[env.staging]
name = "mirubato-frontendv2-staging"
workers_dev = false

[env.staging.vars]
API_URL = "https://api-staging.mirubato.com"

[[env.staging.routes]]
pattern = "staging.mirubato.com"
custom_domain = true

[env.staging.assets]
directory = "./dist"
binding = "ASSETS"

# Development environment
[env.dev]
name = "mirubato-frontendv2-dev"
workers_dev = true

[env.dev.vars]
API_URL = "http://localhost:8787"

# Local development configuration
[env.local]
name = "mirubato-frontendv2-local"
workers_dev = true

[env.local.vars]
API_URL = "http://api-mirubato.localhost:9797"
SCORES_URL = "http://scores-mirubato.localhost:9788"