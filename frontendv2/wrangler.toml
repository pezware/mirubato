name = "mirubato-frontendv2"
main = "src/index.js"
compatibility_date = "2025-01-01"
account_id = "1362434665780520e89f9f06b1057d24"

[build]
command = "pnpm run build"

# Production environment (default)
workers_dev = false

[assets]
directory = "./dist"
binding = "ASSETS"

[vars]
API_URL = "https://api.mirubato.com"
SCORES_URL = "https://scores.mirubato.com"
DICTIONARY_URL = "https://dictionary.mirubato.com"

# Observability
[observability.logs]
enabled = true

[[routes]]
pattern = "mirubato.com"
custom_domain = true

[[routes]]
pattern = "www.mirubato.com"
custom_domain = true

# Explicit production environment (for consistency)
[env.production]
name = "mirubato-frontendv2"
workers_dev = false

[env.production.vars]
API_URL = "https://api.mirubato.com"
SCORES_URL = "https://scores.mirubato.com"
DICTIONARY_URL = "https://dictionary.mirubato.com"

# Observability
[env.production.observability.logs]
enabled = true

[[env.production.routes]]
pattern = "mirubato.com"
custom_domain = true

[[env.production.routes]]
pattern = "www.mirubato.com"
custom_domain = true

[env.production.assets]
directory = "./dist"
binding = "ASSETS"

# Staging environment
[env.staging]
name = "mirubato-frontendv2-staging"
workers_dev = false

[env.staging.vars]
API_URL = "https://api-staging.mirubato.com"
SCORES_URL = "https://scores-staging.mirubato.com"
DICTIONARY_URL = "https://dictionary-staging.mirubato.com"

# Observability
[env.staging.observability.logs]
enabled = true

[[env.staging.routes]]
pattern = "staging.mirubato.com"
custom_domain = true

[env.staging.assets]
directory = "./dist"
binding = "ASSETS"

# Development environment
[env.dev]
name = "mirubato-frontendv2-dev"
workers_dev = true

[env.dev.vars]
API_URL = "http://localhost:8787"
DICTIONARY_URL = "http://localhost:9799"

# Local development configuration
[env.local]
name = "mirubato-frontendv2-local"
workers_dev = true

[env.local.vars]
API_URL = "http://api-mirubato.localhost:9797"
SCORES_URL = "http://scores-mirubato.localhost:9788"
DICTIONARY_URL = "http://dictionary-mirubato.localhost:9799"

# Observability
[env.local.observability.logs]
enabled = false
